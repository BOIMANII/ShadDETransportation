<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Service Updates — Canada Commute</title>
  <style>
    /* … all your existing CSS … */
  </style>
</head>
<body>

  <header class="topbar">
    <div class="logo">
      <img src="images/logo.png" alt="Canada Commute logo"/>
    </div>
    <button class="menu-toggle" aria-label="Toggle menu">☰</button>
    <nav class="nav-links">
      <!-- your links… -->
    </nav>
    <div class="search-container">
      <!-- search… -->
    </div>
  </header>

  <main class="updates-page">
    <div id="map"></div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // safely hook up mobile menu
      const menuToggle = document.querySelector('.menu-toggle');
      const navLinks   = document.querySelector('nav.nav-links');
      if (menuToggle && navLinks) {
        menuToggle.addEventListener('click', () => {
          navLinks.classList.toggle('open');
        });
      }

      // fetch your API key & load Google Maps
      fetch('/api/getMapKey', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ password: 'SHADDE' })
      })
      .then(res => {
        if (!res.ok) throw new Error('Unauthorized');
        return res.json();
      })
      .then(({ key }) => {
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${key}&callback=initMap`;
        script.async = true;
        document.head.appendChild(script);
      })
      .catch(console.error);
    });

    function initMap() {
      new google.maps.Map(document.getElementById('map'), {
        center: { lat: 43.65, lng: -79.35 },
        zoom: 12,
        disableDefaultUI: true
      });
    }
  </script>

</body>
</html>
